<!DOCTYPE html>
<html>
<head>
    <title>Chatbot Widget Demo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="tabs">
        <button class="tab-button active" data-tab="demo">Demo</button>
        <button class="tab-button" data-tab="admin">Admin</button>
    </div>

    <!-- Demo Tab -->
    <div id="demo" class="tab-content active">
        <h1 class="demo-header">Hi Mansoor :D</h1>
        
        <div class="section-container">
            <div class="section-title">How to Use the Chatbot Widget</div>
            <div class="instructions">
                <div class="instruction-step">
                    Add the widget script to your HTML file:
                    <pre class="code-block"><code>&lt;script src="https://dev.d14atbjemoqupg.amplifyapp.com/widget.js"&gt;&lt;/script&gt;</code></pre>
                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                </div>
                
                <div class="instruction-step">
                    Add the widget component to your HTML where you want the chatbot to appear:
                    <pre class="code-block"><code>&lt;chatbot-widget 
    agent-name="catipult"
    ai-model="claude-default"
    primary-color="#4F46E5"
    bottom="20px"
    right="20px"
&gt;&lt;/chatbot-widget&gt;</code></pre>
                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                </div>
            </div>

            <div class="section-title">Attributes</div>
            <div class="field-explanation">
                <div class="field-name">agent-name (Required)</div>
                <p>The name of your trained agent containing the document knowledge.</p>
            </div>
            <div class="field-explanation">
                <div class="field-name">ai-model (Optional)</div>
                <p>The AI model to use. Defaults to "claude-default" if not specified.</p>
            </div>
            <div class="field-explanation">
                <div class="field-name">primary-color (Optional)</div>
                <p>The main color for the widget UI. Default: "#4F46E5"</p>
            </div>
            <div class="field-explanation">
                <div class="field-name">bottom (Optional)</div>
                <p>Distance from bottom of viewport. Default: "20px"</p>
            </div>
            <div class="field-explanation">
                <div class="field-name">right (Optional)</div>
                <p>Distance from right of viewport. Default: "20px"</p>
            </div>
        </div>

        <!-- Chatbot Configuration Section -->
        <div class="section-container">
            <div class="section-title">Chatbot Configuration</div>
            <div class="section-description">Select which agent's knowledge the chatbot should use.</div>

            <div class="form-group">
                <label>Which agent should the chatbot use?</label>
                <select class="dropdown" id="chatbotAgentSelect">
                    <option value="">Select an agent...</option>
                </select>
            </div>

            <chatbot-widget 
                id="doc-widget"
                ai-model="claude-default"
                primary-color="#4F46E5"
                bottom="20px"
                right="20px"
            ></chatbot-widget>
        </div>

        <!-- Demo Widget -->
        <div class="section-container">
            <div class="section-title">Live Demo</div>
            <div class="section-description">Try out the widget with our demo agent:</div>
            
            <div class="demo-instructions">
                <p><strong>Click the chat bubble</strong> in the bottom right corner to open the chatbot.</p>
                <p><strong>ℹ️ Pro tip:</strong> Click the agent name in the chatbot header to see how many documents are loaded for context.</p>
            </div>
        </div>
    </div>

    <!-- Admin Tab -->
    <div id="admin" class="tab-content">
        <div class="test-section">
            <!-- Document Upload Section -->
            <div class="section-container">
                <div class="section-title">Document Upload</div>
                <div class="section-description">Upload PDF documents and assign them to specific agents.</div>
                
                <div class="form-group">
                    <label>Which agent should this document belong to?</label>
                    <div class="agent-controls">
                        <select class="dropdown" id="uploadAgentSelect">
                            <option value="">Select an agent...</option>
                        </select>
                        <button class="create-agent-button" id="showCreateAgentButton">New Agent</button>
                    </div>
                </div>

                <div class="new-agent-form" id="newAgentForm">
                    <input type="text" id="newAgentName" placeholder="Enter agent name (letters, numbers, and hyphens only)">
                    <button class="create-agent-button" id="createAgentButton">Create Agent</button>
                </div>

                <div class="upload-section">
                    <div class="file-input-wrapper">
                        <input type="file" class="file-input" id="pdfFile" accept=".pdf" disabled>
                    </div>
                    <button class="upload-button" id="uploadButton" disabled>Upload PDF</button>
                </div>
                
                <div class="progress-section">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="status-message"></div>
                </div>

                <div class="form-group">
                    <label>Documents in selected agent's folder:</label>
                    <select class="dropdown" id="documentSelect" disabled>
                        <option value="">Select a document...</option>
                    </select>
                </div>
                
                <div class="document-controls">
                    <button class="reprocess-button" id="reprocessButton" disabled>Reprocess Document</button>
                </div>
            </div>

            <!-- Admin Controls -->
            <div class="section-container">
                <div class="section-title">Admin Controls</div>
                <div class="section-description">Clear the database to reset all document embeddings.</div>
                <button class="clear-db-button" id="clearDbButton">Clear Database</button>
            </div>
        </div>
        
        <!-- Debug Console -->
        <div id="debug">
            <h3>Debug Console</h3>
            <pre id="debug-output"></pre>
        </div>
    </div>

    <!-- Load widget script - Use local version for development -->
    <!-- <script src="widget.js"></script> !-->
    <!-- Production version - commented out for development -->
    <script src="https://dev.d14atbjemoqupg.amplifyapp.com/widget.js"></script>
    
    <!-- Load modular JavaScript -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
